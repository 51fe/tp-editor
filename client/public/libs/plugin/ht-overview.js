!function(e,B){"use strict";var M="ht",o=M+".graph.",L=e[M],v=L.graph,q=L.Default,c=L.Color,_=null,x="px",T=q.getInternal(),r=T.getPinchDist,V=q.preventDefault,m=q.getTouchCount,C=q.startDragging;T.addMethod(q,{overviewBackground:c.widgetBackground,overviewMaskBackground:c.transparent,overviewContentBorderColor:c.widgetBorder,overviewContentBackground:c.background},!0),v.Overview=function(J){var e=this,I=e._view=T.createView(1,e);e._canvas=T.createCanvas(I),I.style.background=q.overviewBackground,I.appendChild(e._mask=T.createDiv()),e.setGraphView(J),e.addListeners()},q.def(o+"Overview",B,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:q.overviewMaskBackground,_contentBorderColor:q.overviewContentBorderColor,_contentBackground:q.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(y){var v=this;if(v.gv!==y){var k=v.gv;v.gv=y,k&&(k.removeViewListener(v.handleGraphViewChanged,v),k.ump(v.handleGraphViewPropertyChanged,v)),y&&(y.addViewListener(v.handleGraphViewChanged,v),y.mp(v.handleGraphViewPropertyChanged,v)),v.fp("graphView",k,y),v.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(j){this._autoUpdate&&"validate"===j.kind&&this.redraw()},handleGraphViewPropertyChanged:function(W){("canvasBackground"===W.property||this.getFixToRect()&&("zoom"===W.property||"translateX"===W.property||"translateY"===W.property))&&this.redraw()},redraw:function(){var F=this;F._redraw||(F._redraw=1,F.iv(50))},validateImpl:function(){var P=this,W=P.gv,S=P._canvas,N=P.getWidth(),d=P.getHeight(),b=P._redraw,A=q.devicePixelRatio;if(W){var g=P._mask,L=g.style,H=W.getViewRect(),Y=this.getFixToRect(),y=Y?"boolean"==typeof Y?W.getContentRect():Y:W.getScrollRect(),M=y.x,Z=y.y,Q=y.width,B=y.height,r=P._rate=Math.max(Q/N,B/d),n=P._x=(N-Q/r)/2,E=P._y=(d-B/r)/2;if(0!==H.width&&0!==H.height||P.hasRetry||(q.callLater(P.iv,P,_),P.hasRetry=!0),(N!==S.clientWidth||d!==S.clientHeight)&&(T.setCanvas(S,N,d),b=1),T.isSameRect(y,P._scrollRect)||(P._scrollRect=y,b=1),b){var V=T.initContext(S),z=W.getDataModel(),p=z.getBackground()||P._contentBackground,D=P._contentBorderColor;V.clearRect(0,0,N*A,d*A);var R=z.getBackground()&&z.a("width")>0&&z.a("height")>0;p&&!R&&T.fillRect(V,n*A,E*A,Q/r*A,B/r*A,p),T.translateAndScale(V,-M/r+n,-Z/r+E,1/r),W._42(V),V.restore(),D&&T.drawBorder(V,D,n*A,E*A,Q/r*A,B/r*A)}L.background=P._maskBackground,L.left=n+(H.x-M)/r+x,L.top=E+(H.y-Z)/r+x,L.width=H.width/r+x,L.height=H.height/r+x,P._redraw=null}else if(b){var V=T.initContext(S);V.clearRect(0,0,N*A,d*A),V.restore(),P._redraw=null}},center:function(i){var L=this,I=L.gv;if(I){var S=I._zoom,Z=I._29I,t=L._rate,Q=L._scrollRect,s=q.getLogicalPoint(i,L._canvas),x=Q.x+(s.x-L._x)*t,k=Q.y+(s.y-L._y)*t;I.setTranslate((Z.width/2-x)*S,(Z.height/2-k)*S)}},handle_mousedown:function(r){this.handle_touchstart(r)},handleWindowMouseUp:function(Y){this.handleWindowTouchEnd(Y)},handleWindowMouseMove:function(F){this.handleWindowTouchMove(F)},handle_mousewheel:function(G){this.handleScroll(G,G.wheelDelta)},handle_DOMMouseScroll:function(G){2===G.axis&&this.handleScroll(G,-G.detail)},handleScroll:function(U,v){if(V(U),this.gv){var s=this.gv;v>0?s.scrollZoomIn():0>v&&s.scrollZoomOut()}},handle_touchstart:function(G){if(V(G),this.gv&&q.isLeftButton(G)){var T=this,b=T.gv,M=m(G);1===M?q.isDoubleClick(G)&&b.isResettable()?b.reset():(T.center(G),C(T,G)):2===M&&(T._dist=r(G),C(T,G))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(v){if(this.gv){var P=this,c=P._dist,q=m(v);1===q?P.center(v):2===q&&c!=_&&P.gv.handlePinch(_,r(v),c)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);