!function(D,d){"use strict";var s="ht",N=D[s],o="px",Y="left",P="top",R="bottom",X="right",_="innerHTML",M="className",T="",t="width",q="height",W="string",C="position",$="absolute",B="0",r="opacity",p="background",H=N.Default,f=H.getInternal(),Z=N.Color,g=H.animate,m=H.isTouchable,x=H.isTouchEvent,U=null,Q=(Math.sqrt,D.parseInt),y=D.setTimeout,j=(Math.round,Z.titleIconBackground),A=function(G){return typeof G===W||G instanceof String},J=function(){return document},n=function(l){return J().createElement(l)},G=function(){var p=n("div");return p.tabIndex=-1,p.style.outline="none",p},F=function(){return n("canvas")},z=function(V,Z){I(V,"-webkit-transform",Z),I(V,"-ms-transform",Z),I(V,"transform",Z)},I=function(Z,u,H){Z.style.setProperty(u,H,U)},v=function(X,r,V){H.def(N.widget[X],r,V)},S=function(B,i){B.appendChild(i)},b=function(){return J().documentElement},k=function(){return b().clientWidth},c=function(){return b().clientHeight},h=f.addEventListener,O=f.removeEventListener,u=function(z){var G=z.touches[0];return G?G:z.changedTouches[0]};f.addMethod(H,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:j},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:j}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:j},{type:"rect",rect:[10,10,80,20],background:j}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:j},{type:"rect",rect:[10,34,56,14],background:j},{type:"rect",rect:[34,10,56,14],background:j},{type:"rect",rect:[82,10,8,56],background:j},{type:"rect",rect:[66,62,24,8],background:j}]},dialogTitleLabelColor:H.labelSelectColor,dialogTitleLabelFont:(m?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:H.labelFont,dialogTitleBackground:Z.titleBackground,dialogHeaderBackground:Z.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var a=function(V){var x=this;x.$1d=V,x.addListeners()};H.def(a,d,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(O){var y=this,i=y.$1d,S=i.$6d,v=i._config,X=i.$7d,m=O,W=O.target;if(X.contains(W)||H.preventDefault(O),H.isLeftButton(O)){x(O)&&(m=u(O));var N=y.$8d={x:m.pageX,y:m.pageY};y.$9d={x:N.x,y:N.y},!v.maximized&&v.draggable&&S.contains(W)&&(y.$4d=!0,H.startDragging(y,O)),y.handle_mousemove(O)&&(y.$2d=!0,H.startDragging(y,O)),X.contains(O.target)||i.$41d.focus()}},handle_mousedown:function(s){this.handle_touchstart(s)},handle_touchend:function(o){if(H.isLeftButton(o)&&!this.$5d&&!this.$3d){var b=this,S=b.$1d,p=o.target,E=S._config,f=S.$18d,u=S.$16d;for(E.closable&&f.contains(p)&&S.hide(),E.maximizable&&u.contains(p)&&(E.maximized?S.restore():S.maximize());p&&(p.className||"").indexOf("dialog-button")<0;)p=p.parentNode;p&&p.buttonItem&&S.action&&S.action(p.buttonItem,o),delete b.$8d,delete b.$9d}},handle_mouseup:function(V){this.handle_touchend(V)},handleWindowTouchEnd:function(m){var A=this,n=A.$1d,u=n.$10d;A.$2d&&A.$3d?u.fire({kind:"endResize",target:n,originEvent:m}):A.$4d&&A.$5d&&u.fire({kind:"endMove",target:n,originEvent:m}),this.clear()},handleWindowMouseUp:function(A){this.handleWindowTouchEnd(A)},handle_mousemove:function(k){var M=this.$1d._config;if(M.maximized)return!1;if("w"!==M.resizeMode&&"h"!==M.resizeMode&&"wh"!==M.resizeMode)return!1;var W=this,n=W.getView(),R=n.querySelector(".resize-area"),o=R.getBoundingClientRect(),t={x:o.left,y:o.top,width:o.width,height:o.height};k=x(k)?u(k):k;var K=k.clientX,O=k.clientY,B={x:K,y:O};return H.containsPoint(t,B)?(I(n,"cursor","nwse-resize"),!0):(I(n,"cursor",T),void 0)},handleWindowTouchMove:function($){$.preventDefault();var L=$;x($)&&(L=u($));var r=this,s=r.$8d,f=r.$9d;if(!(f.x==s.x&&f.y==s.y&&H.getDistance(f,{x:L.pageX,y:L.pageY})<=1)){var h=r.$1d,w=h._config,D=h.$21d,X=w.resizeMode||"wh",j=L.pageX-s.x,n=L.pageY-s.y;if(r.$2d){var M=D.offsetWidth,R=D.offsetHeight,Z=M+j,O=R+n;if(Z=Math.max(Z,50),O=Math.max(O,50),"center"===w.position||w.position==U){var e={},p=D.getBoundingClientRect();e.x=p.left,e.y=p.top,w.position=e}"w"===X?(h.setSize(Z,R),s.x+=Z-M):"h"===X?(h.setSize(M,O),s.y+=O-R):"wh"===X&&(h.setSize(Z,O),s.x+=Z-M,s.y+=O-R),r.$3d?h.$10d.fire({kind:"betweenResize",target:h,originEvent:$}):(r.$3d=!0,h.$10d.fire({kind:"beginResize",target:h,originEvent:$}))}else if(r.$4d){var F=D.getBoundingClientRect(),b=F.width,W=F.height,d=k(),i=c(),G=Q(D.style.left)||0,g=Q(D.style.top)||0,V=G+j,t=g+n,m=h.adjustPosition({x:V,y:t},{width:b,height:W},{width:d,height:i});m&&(V=m.x,t=m.y);var B=V-G,z=t-g;I(D,Y,V+o),I(D,P,t+o),s.x+=B,s.y+=z,w.position={x:V,y:t},r.$5d?h.$10d.fire({kind:"betweenMove",target:h,originEvent:$}):(r.$5d=!0,h.$10d.fire({kind:"beginMove",target:h,originEvent:$}))}}},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},handleWindowResize:function(){var r=this,d=r,w=d._config,E=d.$21d,V=k(),M=c(),R=w.width,m=w.height,Z=w.position||"center";w.maximized?(I(E,t,V+o),I(E,q,M+o),I(E,P,B),I(E,Y,B)):(I(E,t,R+o),I(E,q,m+o),"center"===Z?(I(E,Y,(V-R)/2+o),I(E,P,(M-m)/2+o)):(I(E,Y,Z.x+o),I(E,P,Z.y+o))),d.iv()},handle_mousewheel:function(z){z.stopPropagation()},handle_DOMMouseScroll:function(m){m.stopPropagation()}}),N.widget.Dialog=function(z){var D=this,s=D._view=f.createView(null,D);s[M]="ht-widget-dialog",I(s,C,$),I(s,P,B),I(s,R,B),I(s,Y,B),I(s,X,B),I(s,t,"auto"),I(s,q,"auto"),H.baseZIndex!=U&&I(s,"z-index",H.baseZIndex+"");var O=D.$11d=new a(D);D.bindingHandleWindowResize=O.handleWindowResize.bind(D),D.$10d=new N.Notifier,z&&D.setConfig(z)},v("Dialog",d,{ms_v:1,ms_fire:1,_modal:!0,setTitle:function(P){this._config.title=P,this.getView().querySelector(".dialog-container-title span").innerHTML=P},clearNodes:function(F){if(F)for(;F.firstChild;)F.removeChild(F.firstChild)},$31d:function(){var D=this,a=D.$6d=G(),f=D._config,Q=D.$12d=D.$13d();a[M]="dialog-container-title",I(a,"cursor","default"),I(a,"white-space","nowrap"),I(a,"overflow","hidden"),I(a,"font",H.dialogTitleLabelFont),I(a,p,f.titleBackground||H.dialogTitleBackground),I(a,"color",f.titleColor||H.dialogTitleLabelColor);var c=n("span"),v=D.$25d();if(f.titleAlign&&I(a,"text-align",f.titleAlign),f.titleIcon){var m=D.$14d=D.$15d();S(a,m)}if(f.title&&f.title.trim&&(f.title=f.title.trim()),c[_]=f.title||"&nbsp;",S(a,c),f.maximizable){var C=D.$16d=D.$17d();S(Q,C)}if(f.closable){var q=D.$18d=D.$19d();S(Q,q)}return S(a,Q),I(a,"display","block"),I(a,"line-height",v+o),a},$13d:function(){var n=G();return I(n,C,$),I(n,Y,B),I(n,X,5+o),I(n,P,B),I(n,R,B),I(n,"text-align",X),I(n,"white-space","nowrap"),n[M]="dialog-title-controls",n},$20d:function(){var P=this.$21d=G(),O=this._config,X=O.borderWidth;return I(P,C,"fixed"),I(P,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),I(P,"padding",B+" "+X+o+" "+X+o+" "+X+o),I(P,"box-sizing","border-box"),I(P,"-moz-box-sizing","border-box"),P[M]="dialog-container",I(P,p,O.titleBackground||H.dialogTitleBackground),P},$22d:function(){var d,v=this,Q=v._config,h=v.$7d=G(),l=Q.content,J=0,b=Q.contentPadding||0;Q.buttons!=U&&Q.buttons.length>0&&(J=32),A(l)?h[_]=l:l.getView?(d=l.getView(),S(h,d)):(d=l,S(h,d)),I(h,C,$),I(h,"font",H.dialogContentLabelFont),Q.width&&I(h,t,Q.width-10-2*b+o),N.Default.appendToScreen(h);var f=h.offsetWidth+1,D=h.offsetHeight,r=v.$25d();return Q.width==U?Q.width=f+10+2*b:I(h,t,"auto"),Q.height==U&&(Q.height=D+r+J+5+2*b),N.Default.removeHTML(h),d&&(I(d,"box-sizing","border-box"),I(d,"-moz-box-sizing","border-box"),I(d,t,"100%"),I(d,q,"100%")),h[M]="dialog-content",I(h,P,r+b+o),I(h,R,J+b+o),I(h,Y,b+o),I(h,X,b+o),I(h,"overflow","hidden"),h},getOverlayDiv:function(){return this.$41d},$23d:function(){if(this.$41d)return this.$41d;var A=this.$41d=G();return A[M]="dialog-overlay",I(A,C,$),I(A,P,B),I(A,R,B),I(A,Y,B),I(A,X,B),I(A,p,"rgba(235, 235, 235, 0.7)"),A},_config:U,setSize:function(Y,J){var n=this,f=n._config;f&&(f.width=Y,f.height=J,n.isShowing()&&(n.bindingHandleWindowResize(),n.iv()))},getConfig:function(){return this._config},$24d:function(){var B=this._config,i=B.titleIconSize||16;return m&&(i*=1.2),i},$25d:function(){var e=this._config,k=e.titleHeight||H.widgetTitleHeight;return k},$26d:function(X){I(X,"cursor","pointer"),I(X,"display","inline-block"),I(X,"margin-right",(m?8:4)+o),I(X,"vertical-align",P)},$27d:function(){var F=this.$30d=G(),r=10;return m&&(r=20),I(F,t,r+o),I(F,q,r+o),I(F,C,$),I(F,R,B),I(F,X,B),F[M]="resize-area",F},$15d:function(){var E=this,t=F();t[M]="dialog-title-control dialog-title-control-icon";var r=E.$25d(),y=E.$24d();return E.$26d(t),f.setCanvas(t,y,r),t},$17d:function(){var a=F();a[M]="dialog-title-control dialog-title-control-maximize";var Z=this.$25d(),K=this.$24d();return this.$26d(a),f.setCanvas(a,K,Z),a},$19d:function(){var X=F();X[M]="dialog-title-control dialog-title-control-close";var Y=this.$25d(),O=this.$24d();return this.$26d(X),f.setCanvas(X,O,Y),X},$28d:function(){var e=G();return I(e,p,H.dialogContentBackground||"white"),I(e,t,"100%"),I(e,q,"100%"),I(e,C,"relative"),e},$29d:function(){var h=this,v=G();I(v,"line-height",32+o),I(v,C,$),I(v,R,B),I(v,Y,B),I(v,"white-space","nowrap"),I(v,"overflow","hidden"),I(v,X,B),I(v,p,H.dialogHeaderBackground),v[M]="dialog-container-buttons";var w=this._config,V=w.buttonsAlign||X,E=0;return I(v,"text-align",V),h.$42d=[],w.buttons.forEach(function(x){var f={};for(var w in x)f[w]=x[w];x.background||(f.background=H.dialogButtonBackground),x.selectBackground||(f.selectBackground=H.dialogButtonSelectBackground),x.labelColor||(f.labelColor=H.dialogButtonLabelColor);var u=H.createObject(N.widget.Button,f),d=u.getView();d[M]="dialog-button "+x.className,d.buttonItem=x,h.$42d.push(u),I(d,C,"relative"),I(d,"display","inline-block"),I(d,"text-align",Y),I(d,"height",24+o);var R=m?10:5;V===Y||V===X?I(d,"margin-"+V,R+o):0===E||I(d,"margin-"+Y,R+o),I(d,"vertical-align","middle");var n=H.getTextSize(u.getLabelFont(),x.label).width+10;u.onClicked=function(B){x.action&&x.action.call(h,x,B)},I(d,t,n+o),S(v,u.getView()),E++}),v},setConfig:function(K){if(K){var Z=this,D=Z._view;Z._config=K,Z.action=K.action,Z.clearNodes(D),K.borderWidth==U&&(K.borderWidth=5);var x=Z.$23d(),X=Z.$28d(),s=Z.$31d(),E=Z.$22d(),y=Z.$20d(),H=Z.$30d=Z.$27d();if(S(D,x),S(D,y),S(y,X),S(X,s),S(X,E),K.buttons!=U&&K.buttons.length>0){var L=Z.$29d();S(X,L)}S(y,H),K.maximized?(K.maximized=!1,Z.bindingHandleWindowResize(),Z.maximize(!0)):Z.bindingHandleWindowResize(),Z.isShowing()&&Z.iv()}},hide:function(){var A=this,w=A.$21d,J=A.$41d,m=A._view;m[M]="ht-widget-dialog",g(w).duration(200).scale(.7).set(r,B).end(function(){A.onHidden&&A.onHidden(),N.Default.removeHTML(m),A.$10d.fire({kind:"hide",target:A})}),g(J).duration(200).set(r,B).end(),O(D,"resize",A.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(p){this._modal=p;var d=this.$23d();d.style.display=p?"block":"none";var W=this._view;I(W,t,p?"auto":B),I(W,q,p?"auto":B)},isModal:function(){return this._modal},$32d:function(){var j=this,E=j._config,s=j.$21d;z(s,T),j.iv(),E.maximized?j.$10d.fire({kind:"maximize",target:j}):j.$10d.fire({kind:"restore",target:j})},maximize:function(y){var u=this,O=u.$21d,K=u._config;if(!K.maximized){K.maximized=!0,u.$33d(),u.$16d[M]="dialog-title-control dialog-title-control-minimize";var E=K.width,l=K.height,N=Q(O.style.left)||0,D=Q(O.style.top)||0;u.$36d=E,u.$37d=l,u.$34d=N,u.$35d=D;var A,R=y?0:200,W=this._view.parentNode;A=W&&W!==document.body?this._view.parentNode.getBoundingClientRect():H.getWindowInfo(),g(O).duration(R).set(Y,A.left+o).set(P,A.top+o).set(t,A.width+o).set(q,A.height+o).end(function(){u.$32d()})}},restore:function(){var y=this,c=y.$34d,b=y.$35d,H=y.$36d,S=y.$37d,m=y._config;if(m.maximized&&(m.maximized=!1,y.$33d(),y.$16d[M]="dialog-title-control dialog-title-control-maximize",y.isShowing()&&c!=U&&b!=U&&H!=U&&S!=U)){var Z=y.$21d;g(Z).duration(200).set(Y,c+o).set(P,b+o).set(t,H+o).set(q,S+o).end(function(){y.$32d()})}delete y.$34d,delete y.$35d,delete y.$36d,delete y.$37d},show:function($){var b=this,C=b._view,n=b._config,O=b.$21d,i=b.$41d;$=$||n.parentDOM,n&&n.zIndex!=U&&I(C,"z-index",n.zIndex+T),$?N.Default.appendChild($,C):N.Default.appendToScreen(C),z(O,"scale(0.7)"),I(O,r,B),b.iv(),b.validate(),b._view[M]+=" dialog-show",y(function(){g(O).duration(200).scale(1).set(r,"1").end(function(){I(O,t,O.clientWidth+o),I(O,q,O.clientHeight+o),b.onShown&&b.onShown(),b.$10d.fire({kind:"show",target:b});var l=n&&n.content;l&&l.iv&&l.iv()}),g(i).duration(200).set(r,"1").end(),h(D,"resize",b.bindingHandleWindowResize)},30)},setPosition:function(W){var d=this.$21d;d.style.left=W.x+"px",d.style.top=W.y+"px"},addEventListener:function(I,n,L){this.$10d.add(I,n,L)},removeEventListener:function(L,u){this.$10d.remove(L,u)},$38d:function(c,g,N,D){var v=f.initContext(c);f.translateAndScale(v,0,0,1),v.clearRect(0,0,N,N);var n=(N-D)/2;H.drawStretchImage(v,H.getImage(g),"fill",0,n,D,D),v.restore()},$33d:function(){var B=this,e=B._config,g=B.$16d,M=e.maximized?H.dialogRestoreIcon:H.dialogMaximizeIcon;if(g&&M){var h=B.$25d(),Q=B.$24d();B.$38d(g,H.getImage(M),h,Q)}},$39d:function(){var o=this,f=o._config,s=o.$14d,M=f.titleIcon;if(s&&M){var Z=o.$25d(),O=o.$24d();o.$38d(s,H.getImage(M),Z,O)}},$40d:function(){var Z=this,J=Z.$18d,m=H.dialogCloseIcon;if(J&&m){var r=Z.$25d(),g=Z.$24d();Z.$38d(J,H.getImage(m),r,g)}},invalidate:function(G){var l=this,u=l.$42d;l._68I||(l._68I=1,H.callLater(l.validate,l,U,G),l.onInvalidated&&l.onInvalidated(),l.fireViewEvent("invalidate"));var Q=l._config.content;Q.invalidate&&Q.invalidate(),u&&u.forEach(function(A){A.iv()})},validateImpl:function(){var K=this;K.$40d(),K.$33d(),K.$39d();var Y=K._config.content;Y.initView&&(Y.setX(0),Y.setY(0),Y.setWidth(K.$7d.clientWidth),Y.setHeight(K.$7d.clientHeight))},adjustPosition:function(Y,w,h){var H=w.width,Z=w.height,m=h.width,x=h.height,J=Y.x,N=Y.y,d=this._config,$=d.minDragSize||20;return"inside"===d.dragMode?(J+H>m&&(J=m-H),N+Z>x&&(N=x-Z),0>J&&(J=0),0>N&&(N=0)):(null==d.dragMode||"none"===d.dragMode)&&(-H+$>J&&(J=-H+$),J>m-$&&(J=m-$),N>x-$&&(N=x-$),0>N&&(N=0)),{x:J,y:N}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);